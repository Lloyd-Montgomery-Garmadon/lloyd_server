
---

# 网盘系统详细需求文档（扩展版）

## 一、用户系统

### 1.1 注册与登录

* **注册方式**

    * 手机号注册：手机号 + 短信验证码验证 + 密码
    * 邮箱注册：邮箱 + 验证码 + 密码
* **第三方登录**

    * 微信 OAuth2.0
    * QQ OAuth2.0
    * GitHub OAuth2.0
    * 第三方登录首次绑定系统账号流程
* **鉴权机制**

    * JWT 令牌生成（payload 包含 `user_id`、`role`、`exp`）
    * Access Token 有效期：24小时
    * Refresh Token 有效期：30天
    * Token 刷新接口：根据 Refresh Token 获取新的 Access Token
    * Token 黑名单机制（用户登出/禁用时清理）
* **登录日志**

    * 登录时间、IP、设备信息、地理位置

---

### 1.2 账户安全

* **二步验证**

    * 登录时可选短信或邮箱验证码
    * 可开启/关闭二步验证
* **登录设备管理**

    * 显示设备类型、浏览器、IP、最近登录时间
    * 支持主动注销某设备
* **异常登录检测**

    * 异地/新设备登录触发通知
    * 提供安全告警邮件或推送
* **密码管理**

    * 密码强度检查（长度≥8位，必须包含字母+数字+特殊字符）
    * 定期修改提醒（90天/180天）
    * 支持找回密码（邮件/短信验证码）

---

### 1.3 容量管理

* **容量显示**

    * 个人中心显示已用容量 / 总容量 + 百分比条
* **容量分配策略**

    * 免费用户：10GB
    * VIP用户：1TB
* **容量预警**

    * 使用量 ≥ 90% 触发通知（邮件/推送）
    * VIP用户可扩容选项（付费）

---

### 1.4 会员体系

* **会员等级**

    * 普通会员 / 白金会员 / 钻石会员
* **会员特权**

    * 高速下载通道（优先 CDN 节点）
    * 大文件上传支持（最大 100GB）
    * 专属客服通道
    * 分享链接有效期延长（永久或自定义时间）

---

## 二、文件管理

### 2.1 基础操作

* **文件夹**

    * 创建、重命名、移动、复制、删除
    * 支持多级路径、面包屑导航
* **文件**

    * 拖拽上传/下载
    * 支持多选批量操作（删除、移动、下载）
* **回收站**

    * 删除文件保留 30 天
    * 支持恢复 / 永久删除
    * 自动清理过期文件

---

### 2.2 智能分类

* **自动分类**

    * 图片（JPG/PNG/GIF等）
    * 视频（MP4/MOV/AVI等）
    * 文档（PDF/DOC/XLS/PPT）
    * 音频（MP3/WAV）
    * 压缩文件（ZIP/RAR）
* **标签管理**

    * 用户自定义标签，最多 10 个
* **收藏夹**

    * 星标重要文件，支持快速访问

---

### 2.3 批量操作

* **批量下载**

    * 自动打包 ZIP
* **批量删除**

    * 可选择回收站/永久删除
* **批量移动**

    * 支持跨文件夹移动
* **批量重命名**

    * 支持前缀/后缀/序列号模式

---

### 2.4 文件搜索

* **搜索条件**

    * 文件名关键字
    * 文件类型
    * 创建/修改时间范围
    * 文件大小范围
* **搜索结果**

    * 分页显示，每页 20 条
    * 最近搜索历史 30 天
    * 支持按上传时间、修改时间、大小排序

---

## 三、文件预览与编辑

### 3.1 文件预览

* **图片**

    * 缩略图模式 / 全屏模式
    * 幻灯片播放功能
    * EXIF 信息显示（拍摄时间、相机型号、位置等）
* **视频/音频**

    * 在线播放器：进度条、音量控制
    * 播放速度调节（0.5x\~2x）
    * 字幕支持（SRT 格式）
* **文档**

    * Office 文档（DOC/XLS/PPT）
    * PDF 文档（目录导航、缩放）
    * 文本文件（代码高亮、行号）

---

### 3.2 轻量编辑

* **文本编辑器**

    * 支持纯文本 / Markdown
    * 保留最近 5 次版本历史
* **图片编辑器**

    * 旋转 / 裁剪 / 镜像
    * 基础滤镜（黑白/复古等）
    * 分辨率调整（保持比例）

---

## 四、分享机制

### 4.1 分享链接生成

* **配置选项**

    * 密码保护（4\~16 位字符）
    * 有效期（1天/7天/30天/永久）
    * 下载次数限制（1\~100 次）
* **分享内容**

    * 单文件
    * 文件夹
    * 多选文件集合

### 4.2 分享管理

* **管理面板**

    * 列出所有分享链接
    * 查看剩余有效期、访问次数、下载次数
    * 支持提前失效、修改密码、延长有效期

### 4.3 接收分享

* **访问流程**

    * 密码验证
    * 预览内容
    * 下载或保存到当前账户
    * 重复文件处理（覆盖 / 跳过 / 重命名）

---

## 五、传输管理

### 5.1 上传

* **分片上传**

    * 支持 ≤100GB 文件
    * 分片大小动态调整（5MB\~50MB）
* **秒传**

    * 基于 SHA-256 文件哈希
    * 重复文件直接秒传
* **控制**

    * 暂停/继续
    * 并行任务限制（默认 3 个）
    * 用户可调节上传速度

### 5.2 下载

* **多线程**

    * 自动线程优化（2\~8 线程）
* **断点续传**
* **速度管理**

    * 免费用户限速（100KB/s）
    * VIP 用户不限速
* **任务管理**

    * 进行中任务列表
    * 已完成历史 30 天
    * 错误重试（最多 3 次）

---

## 六、数据安全

### 6.1 客户端加密

* **加密模式**

    * 标准模式（服务器端加密）
    * 增强模式（客户端 AES-256 加密）
* **密钥管理**

    * 加密密钥仅存用户本地
    * 密钥恢复机制（安全问题验证）

### 6.2 链接安全

* 动态签名（JWT）
* 默认有效期 2 小时
* 可选 IP 白名单
* 防盗链（Referrer 检查、域名绑定）

### 6.3 操作审计

* 记录关键操作：文件删除、分享创建、密码修改、异常登录
* 日志保留策略：普通操作 30 天，敏感操作 180 天

---

## 七、移动端专属功能

### 7.1 自动备份

* 自动检测新照片/视频
* WiFi 环境下自动上传
* 流量敏感模式（仅 WiFi）
* 上传质量选项（原图/压缩）
* 上传计划（立即 / 定时）

### 7.2 离线访问

* 文件标记离线
* 自动缓存最近访问文件
* 离线空间显示及管理
* 30 天未访问自动清理
* 无网状态浏览/预览

### 7.3 推送通知

* 上传/下载完成
* 分享链接被访问
* 容量不足提醒
* 安全事件提醒
* 通知类型开关、免打扰时段设置

---

## 八、后台管理系统

### 8.1 数据看板

* 实时监控：活跃用户数、存储使用率、实时传输流量、API 成功率
* 历史趋势：7 天/30 天数据对比，异常标记

### 8.2 用户管理

* 用户状态（正常/禁用）
* 强制密码重置
* 存储配额调整
* 会员管理（等级、有效期、特权配置）

### 8.3 内容审计

* 自动扫描：新增文件、违规内容识别（图像/视频/文本）
* 敏感词过滤
* 人工审核：可疑文件标记、审核工作台、处置记录存档

### 8.4 系统监控

* 存储集群监控：节点健康、容量、读写延迟
* 服务监控：API 响应时间、错误率、告警阈值

---
